<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>  
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@2.0.0/dist/tf.min.js"></script> 
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs-vis@1.0.2/dist/tfjs-vis.umd.min.js"></script>
  <script src="script.js"></script>
</head>   

<body>
<style> 
    body{
      margin:20px;
    }
   body{
     margin:20px;
   }
  input{
    outline:none;
  }
  table{
    width:100%;
    border-collapse:collapse; 
    text-align:center;
  }
  th , td{
    border:solid black 1px;
  }
  td{
    padding-top:4px;
    padding-bottom:4px;
  }
/* width */
::-webkit-scrollbar {
  width: 10px;
}

/* Track */
::-webkit-scrollbar-track {
  background: #f1f1f1; 
}
 
/* Handle */
::-webkit-scrollbar-thumb {
  background: #888; 
}

/* Handle on hover */
::-webkit-scrollbar-thumb:hover {
  background: #555; 
} 
  .fm{
    border:solid #E7E9EB 1.5px;
    margin-bottom:10px;
    padding:15px;
  }
  #isr {
    margin-top: 6px;
  }
  #isr .c{
    padding-top:2px;
    padding-bottom:2px;
  }
  #isr .c:nth-child(odd) {
  background-color: #D6EEEE;
}
</style>

  <main> 
       <div style="display:flex;">
        <div>
            <button id="imw" class="btn btn-info" > Import Weights </button>
        </div>
        <div style="margin-left:10px;">
            <button id="imm" class="btn btn-warning" > Import Structure </button>
        </div>
        <div style="margin-left:10px;">
            <button id="imc" class="btn btn-info" > Rebuild Model </button>
        </div>
        <div id="prog" style="flex:1; text-align:right; padding:5px; font-weight:500;"></div>
        
      </div>
      <br/>
    <div class="fm">
      <div>
        <u> Get Data </u>
      </div>
      <div> 
        <br/>
        live : <input style="margin-left:10px;" id="lv" onchange="live(this)" type="checkbox" />
        <input id="rfr" onchange="rdft(this)" style="margin-left:10px; width:60px; text-align:center;" type="number" min="1" value="1000" title="Refresh time ( milli seconds)">
        <input onchange="rdd(this)" style="margin-left:10px; width:60px; text-align:center;" type="number" min="1" value="1" title="Past Value">
        <select id="pst" title="Past Unit" onchange="getTime(this)" style="margin-left:10px">
          <option> minute </option>
          <option> hour </option>
          <option> day </option>
          <option> week </option>
          <option> month </option>
          <option> year </option>
        </select>
        <span style="margin-left:10px;" id="km"></span>
        <br/><br/>
        time filter : <input style="margin-left:10px;" id="tm" type="checkbox" />
        <input id="ss1" style="margin-left:10px;" type="datetime-local" title="Start Time">
        <input id="ss2" style="margin-left:10px;" type="datetime-local" title="End Time">
        <br/><br/>
        <button id="gt1" type="submit" class="btn btn-primary"> GET </button>
        <br/>
        <div id="get"></div>
        <div style="height:50vh"></div>
    </div>
      
  </main>
  <script>
    $(window).on("load" , function()
    { 
        var readKey = window.parent.readKey;
        var channel_Id = window.parent.channel_Id;
        var rdC = -1;
        var outs = [];
        var dts = []; 
        var model;
        var m_file;
        var w_file; 

        $("#imc").on("click" , function()
        {
            window.parent.get_weights(function(w_file)
            {
                window.parent.get_model(function(m_file)
                {
                     tf.loadLayersModel(tf.io.browserFiles([m_file , w_file])).then((md)=>
                     {
                         alert("Model Uploaded Successfully"); 
                         model = md;
                     })  
                });
            });
        });
        $("#imw").on("click" , function()
        {
            window.parent.import_weights(function(file)
            {
                 alert("Model Weights Uploaded"); 
            });
        });
        $("#imm").on("click" , function()
        {
            window.parent.import_model(function(file)
            {
                 alert("Model Structure Uploaded"); 
            });
        });
    });
  </script>

  
</body>
</html>
