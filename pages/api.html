<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">  
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>   

<body>
<style>
/* width */
::-webkit-scrollbar {
  width: 10px;
}

/* Track */
::-webkit-scrollbar-track {
  background: #f1f1f1; 
}
 
/* Handle */
::-webkit-scrollbar-thumb {
  background: #888; 
}

/* Handle on hover */
::-webkit-scrollbar-thumb:hover {
  background: #555; 
}
  main{
    width:calc(100% - 40px);
    margin:auto;
    padding-top:10px;
    padding-bottom:10px;
  }
  .fm{
    border:solid #E7E9EB 1.5px;
    margin-bottom:10px;
    padding:15px;
  }
</style>

  <main> 
    <div class="fm">
      <div>
        Channel API Keys
      </div>
      <div>
        <div class="mb-3 mt-3">
        <label for="current"> Read  </label>
        <input type="text" class="form-control" id="rd_key" placeholder="Enter read key" name="rd_key">
          <input type="checkbox">
      </div>
      <div class="mb-3">
        <label for="voltage"> Write </label>
        <input type="text" class="form-control" id="wr_key" placeholder="Enter Write Key" name="wr_key">
      </div>  
      </div>
    </div>
    <div class="fm">
      <div>
        Post Data
      </div>
      <div>
        <div class="mb-3 mt-3">
        <label for="current">Current : </label>
        <input type="number" min="0" value="0" class="form-control" id="current" placeholder="Enter current value" name="current">
      </div>
      <div class="mb-3">
        <label for="voltage">Voltage:</label>
        <input type="number" min="0" value="0" class="form-control" id="voltage" placeholder="Enter voltage" name="voltage">
      </div> 
      <button id="sub1" type="submit" class="btn btn-primary">Submit</button>
      </div>
    </div>
    <div class="fm">
      <div>
        Post Sample Data
      </div>
      <div>
        <div class="mb-3 mt-3">
          <label for="samples"> Samples : </label>
          <input type="number" class="form-control" id="current" placeholder="Enter number of samples" name="samples">
        </div> 
        <button type="submit" class="btn btn-primary">Submit</button>
    </div>
    </div>
  </main>

  <script>
    var writeKey = window.parent.writeKey;
    var readKey = window.parent.readKey;

    console.log(writeKey);
    console.log(readKey);

    $(window).on("load",function()
    {
       $("#sub1").on("click",function()
       {
           var current = $("#current").val();
           var voltage = $("#voltage").val();

           $.ajax({
             url : "https://api.thingspeak.com/update" ,
             data:{
               api_key: writeKey ,
               Current:current ,
               Voltage : voltage
             },
             success:function(r){
               console.log(r);
             } , 
             error: function(e){
               console.error(e)
             }
           });
             
       });
    });
    
  </script>
</body>
</html>
